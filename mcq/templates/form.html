<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title></title>
    <style>
        input[type = "text"]{
            width:500px;
            height:20px;
        }
    </style>
    <script type = "text/javascript" src = "/site_media/jquery.js"></script>
</head>
<body>
<div style = "width:30%;position:fixed; float:left;display:inline-block;">
    <h3>Question Pools </h3>
</div>
<div style = "position:fixed;margin-left:30%;width:68%;float:left;display:inline-block;">

 {%include "Questions/create_pool_form.html"%}
 {%include "Questions/pool_create_query.html"%}
 {%include "links.html"%}
</div>
<script>
$("#save_button").click(function(){

  var data = new FormData($('form').get(0));
  $.ajax({
      url: '/mcq/{{contest.slug}}/save-pool',
      type: 'POST',
      data: data,
      cache: false,
      processData: false,
      contentType: false,
      success: function(data) {
         alert("pool created");
      },
      error : function(data){
////error. Display some error has occured.
      }
       
  });


});
$("#submit_button").click(function(){

  var data = new FormData($('form').get(0));
  $.ajax({
      url: '/mcq/{{contest.slug}}/create-pool',
      type: 'POST',
      data: data,
      cache: false,
      processData: false,
      contentType: false,
      success: function(data) {
          $(".create_pool_form").css({"display":"none"});
          $(".display_pool_form").css({"display":"block"});
          $("#number_of_questions_response").val(data["number_of_questions"]);
          $("#tools_response").val(data["tools"].join());
          $("#techniques_response").val(data["techniques"].join());
          $("#domain_response").val(data["domains"].join());
//          $("#").val(data["number_of_questions_response"]);
          $("#difficulty_response").val(data["difficulty"].join());
          $("#number_count").text(data["count"]);
          console.log(data);
          console.log(data["count"]);
          if (data["count"] == 0)
          {
              $(".note").text("0 Questions matched your requirements. Press edit to edit your requirements.");
              $(".note").css({"display": "block"});
          }
          else if (data["count"] < data["number_of_questions"] )
          {
              $(".note").text("Only " + data["count"] + " are available. Press save to add this pool." )
              $(".note").css({"display": "block"});
          }
          else{
          }
      },
      error : function(data){
////error. Display some error has occured.
      }
       
  });


});
</script>
</body>
</html>
